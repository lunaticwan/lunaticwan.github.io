# 9장: Next.js 설치하기 - Installing Next.js

프로젝트에서 Next.js를 사용할 때, 더 이상 [unpkg.com](http://unpkg.com)에서 `react`와 `react-dom` 스크립트를 로드할 필요가 없습니다. 대신, `npm`이나 선호하는 패키지 관리자를 사용하여 이러한 패키지를 로컬에 설치할 수 있습니다.

> **참고**: Next.js를 사용하려면 컴퓨터에 Node.js 버전 **18.17.0** 이상이 설치되어 있어야 합니다.
> 최소 버전 요구 사항 참조 https://nextjs.org/docs/getting-started/installation
> 다운로드 https://nodejs.org/en/)](https://nodejs.org/en/

이를 위해, `index.html` 파일과 같은 디렉토리에 `package.json`이라는 새 파일을 생성하고 빈 객체 `{}`를 넣으세요.

`package.json`

```json
{}
```

프로젝트의 루트에서 다음 명령어를 터미널에 실행하세요:

`Terminal`

```bash
npm install react@latest react-dom@latest next@latest
```

설치가 완료되면, `package.json` 파일 내에 프로젝트 의존성이 나열된 것을 볼 수 있습니다:

`package.json`

```json
{
  "dependencies": {
    "next": "^14.0.3",
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  }
}
```

위에 표시된 버전보다 더 높은 버전을 사용하고 있어도 걱정하지 마세요. `next`, `react`, `react-dom` 패키지가 설치되어 있으면 문제없습니다.

`package-lock.json` 파일이 새로 생성되어 각 패키지의 정확한 버전 정보를 담고 있음을 알게 될 것입니다.

`index.html` 파일로 돌아가 다음 코드를 삭제할 수 있습니다:

1. `<html>` 및 `<body>` 태그.
2. `id`가 `app`인 `<div>` 요소.
3. NPM을 통해 설치했으므로 `react`와 `react-dom` 스크립트.
4. Next.js가 JSX를 유효한 자바스크립트로 변환하는 컴파일러를 가지고 있으므로 `Babel` 스크립트.
5. `<script type="text/jsx">` 태그.
6. `document.getElementById()` 및 `ReactDom.createRoot()` 메소드.
7. `React.useState(0)` 함수의 `React.` 부분

위의 줄을 삭제한 후, 파일 상단에 다음 import를 추가하세요:

`index.html`

```jsx
import { useState } from 'react';
```

코드는 다음과 같아야 합니다:

`index.html`

```jsx
import { useState } from 'react';

function Header({ title }) {
  return <h1>{title ? title : 'Default title'}</h1>;
}

function HomePage() {
  const names = ['Ada Lovelace', 'Grace Hopper', 'Margaret Hamilton'];

  const [likes, setLikes] = useState(0);

  function handleClick() {
    setLikes(likes + 1);
  }

  return (
    <div>
      <Header title="Develop. Preview. Ship." />
      <ul>
        {names.map((name) => (
          <li key={name}>{name}</li>
        ))}
      </ul>

      <button onClick={handleClick}>Like ({likes})</button>
    </div>
  );
}
```

HTML 파일에 남은 코드는 JSX뿐이므로 파일 타입을 `.html`에서 `.js` 또는 `.jsx`로 변경할 수 있습니다.

## 첫 페이지 생성하기 - Creating your first page

Next.js는 파일 시스템 라우팅을 사용합니다. 이는 애플리케이션의 라우트를 코드로 정의하는 대신 폴더와 파일을 사용할 수 있다는 의미입니다.

Next.js에서 첫 페이지를 생성하는 방법은 다음과 같습니다:

1. app 이라는 새 폴더를 생성하고 `index.js` 파일을 그 안으로 이동하세요.
> https://nextjs.org/docs/app/building-your-application/routing#the-app-router
2. `index.js` 파일의 이름을 `page.js`로 변경하세요. 이것이 애플리케이션의 메인 페이지가 될 것입니다.
3. `<HomePage>` 컴포넌트에 `export default`를 추가하여 Next.js가 페이지의 메인 컴포넌트로 렌더링할 컴포넌트를 구분할 수 있도록 하세요.

`app/page.js`

```jsx
import { useState } from 'react';

function Header({ title }) {
  return <h1>{title ? title : 'Default title'}</h1>;
}

export default function HomePage() {
  // ...
}
```

## 개발 서버 실행하기 - Running the development server

새 페이지에서 변경 사항을 개발하는 동안 볼 수 있도록 개발 서버를 실행해 보겠습니다. `package.json` 파일에 `"next dev"` 스크립트를 추가하세요:

`package.json`

```json
{
  "scripts": {
    "dev": "next dev"
  },
  "dependencies": {
    "next": "^14.0.3",
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  }
}
```

터미널에서 `npm run dev`를 실행해 보세요. 두 가지를 알게 될 것입니다:

1. [localhost:3000](http://localhost:3000)으로 이동하면 다음 오류가 표시됩니다:

![/assets/React_Foundations/image_url__2Flearn_2Flight_2Flea_0aa69d89befe4510b.png](/assets/React_Foundations/image_url__2Flearn_2Flight_2Flea_0aa69d89befe4510b.png)

이는 Next.js가 서버에서 렌더링할 수 있는 새로운 기능인 React 서버 컴포넌트를 사용하기 때문입니다. 서버 컴포넌트는 `useState`를 지원하지 않으므로 클라이언트 컴포넌트를 대신 사용해야 합니다.

다음 장에서는 서버 및 클라이언트 컴포넌트 간의 주요 차이점을 논의하고 이 오류를 수정할 것입니다.

2. `app` 폴더 안에 자동으로 생성된 `layout.js`라는 새 파일이 있습니다. 이것은 애플리케이션의 메인 레이아웃입니다. 모든 페이지에 공통적으로 사용되는 UI 요소(예: 내비게이션, 푸터 등)를 추가할 수 있습니다.

`/app/layout.js`

```jsx
export const metadata = {
  title: 'Next.js',
  description: 'Generated by Next.js',
};

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

## 요약 - Summary

지금까지의 마이그레이션을 살펴보면, Next.js를 사용하는 이점을 이미 느낄 수 있을 것입니다:

- React와 Babel 스크립트를 제거했습니다; 복잡한 도구와 구성에 대해 더 이상 생각할 필요가 없습니다.
- 첫 페이지를 생성했습니다.

> **추가 읽기:**
> 
> - Next.js 라우팅 기초
> https://nextjs.org/docs/app/building-your-application/routing
> - 라우트 정의하기
> https://nextjs.org/docs/app/building-your-application/routing/defining-routes
> - 페이지와 레이아웃
> https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts